import{f as I}from"./index-0358cb65.js";import{a as F}from"./element-plus-7da03efa.js";import{k as c,e as h,$ as k,ah as i,o as E,c as U,W as l,Q as o,a as v,U as _,V as w}from"./@vue-d9027515.js";import{s as T}from"./@intlify-9e8a497c.js";import"./index-858e7551.js";import"./pinia-be7e992d.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-a2fac16f.js";import"./vue-i18n-e0b9a81d.js";import"./vue-b46b26c7.js";import"./js-cookie-cf83ad76.js";import"./@element-plus-96a31696.js";import"./nprogress-8d2808ea.js";import"./axios-707ed124.js";import"./qs-bbfcbdf3.js";import"./side-channel-eafc5c70.js";import"./get-intrinsic-b9397c9a.js";import"./has-symbols-e8f3ca0e.js";import"./function-bind-22e7ee79.js";import"./has-26d28e02.js";import"./call-bind-9ceb8f5b.js";import"./object-inspect-7b08a46e.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-0ee01be3.js";import"./source-map-7d7e1c08.js";import"./lodash-es-36eb724a.js";import"./@vueuse-2d9216d7.js";import"./@ctrl-f8748455.js";import"./dayjs-6aac7dfa.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-1d60d822.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-463e90e0.js";import"./requestFSGet-6e3c6110.js";const z={class:"system-user-dialog-container"},B={class:"dialog-footer"},G=c({name:"fopsTaskEditDialog"}),Ve=c({...G,emits:["refresh"],setup(J,{expose:g,emit:x}){const d=I(),b=h(),e=k({ruleForm:{Id:0,Name:"",Ver:1,Caption:"",Data:"",StartAt:"",NextAt:"",Cron:"",IsEnable:!1},dialog:{isShowDialog:!1,type:"",title:"",submitTxt:""}}),V=(u,t)=>{if(e.dialog.type=u,u==="edit"){e.ruleForm=t,e.dialog.title="修改任务",e.dialog.submitTxt="修 改";var s="/basicapi/taskGroup/info-"+t.Id;d.taskGroupInfo(s).then(function(m){if(m.Status){var a=m.Data;e.ruleForm.Id=a.Id,e.ruleForm.Name=a.Name,e.ruleForm.Ver=a.Ver,e.ruleForm.Caption=a.Caption,e.ruleForm.Data=T.friendlyJSONstringify(a.Data),e.ruleForm.StartAt=a.StartAt,e.ruleForm.NextAt=a.NextAt,e.ruleForm.Cron=a.Cron,e.ruleForm.IsEnable=a.IsEnable}})}else e.dialog.title="新增任务",e.dialog.submitTxt="新 增",e.ruleForm.Id=0,e.ruleForm.Name="",e.ruleForm.Ver=0,e.ruleForm.Caption="",e.ruleForm.Data="",e.ruleForm.StartAt="",e.ruleForm.NextAt="",e.ruleForm.Cron="",e.ruleForm.IsEnable=!1;e.dialog.isShowDialog=!0},n=()=>{e.dialog.isShowDialog=!1},C=()=>{n()},N=()=>{var u={Id:e.ruleForm.Id,Name:e.ruleForm.Name,Ver:e.ruleForm.Ver,Caption:e.ruleForm.Caption,Data:JSON.parse(e.ruleForm.Data),StartAt:e.ruleForm.StartAt,NextAt:e.ruleForm.NextAt,Cron:e.ruleForm.Cron,IsEnable:e.ruleForm.IsEnable};e.dialog.type==="add"||e.dialog.type=="edit"&&d.taskUpdate(u).then(function(t){t.Status?(F.success("修改成功"),n(),x("refresh")):F.error(t.StatusMessage)})};return g({openDialog:V}),(u,t)=>{const s=i("el-input"),m=i("el-form-item"),a=i("el-col"),p=i("el-date-picker"),D=i("el-switch"),S=i("el-row"),A=i("el-form"),f=i("el-button"),y=i("el-dialog");return E(),U("div",z,[l(y,{title:e.dialog.title,modelValue:e.dialog.isShowDialog,"onUpdate:modelValue":t[8]||(t[8]=r=>e.dialog.isShowDialog=r),width:"769px"},{footer:o(()=>[v("span",B,[l(f,{onClick:C,size:"default"},{default:o(()=>[_("取 消")]),_:1}),l(f,{type:"primary",onClick:N,size:"default"},{default:o(()=>[_(w(e.dialog.submitTxt),1)]),_:1})])]),default:o(()=>[l(A,{ref_key:"gitDialogFormRef",ref:b,model:e.ruleForm,size:"default","label-width":"100px"},{default:o(()=>[l(S,{gutter:35},{default:o(()=>[l(a,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:o(()=>[l(m,{label:"任务名称"},{default:o(()=>[l(s,{modelValue:e.ruleForm.Name,"onUpdate:modelValue":t[0]||(t[0]=r=>e.ruleForm.Name=r),placeholder:"请输入任务名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(a,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:o(()=>[l(m,{label:"版本"},{default:o(()=>[l(s,{modelValue:e.ruleForm.Ver,"onUpdate:modelValue":t[1]||(t[1]=r=>e.ruleForm.Ver=r),placeholder:"请输入版本",clearable:"",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),l(a,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:o(()=>[l(m,{label:"任务标题"},{default:o(()=>[l(s,{modelValue:e.ruleForm.Caption,"onUpdate:modelValue":t[2]||(t[2]=r=>e.ruleForm.Caption=r),placeholder:"请输入任务标题",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(a,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:o(()=>[l(m,{label:"参数"},{default:o(()=>[l(s,{type:"textarea",maxlength:"500","show-word-limit":"",resize:"none",rows:5,class:"textarea-box",modelValue:e.ruleForm.Data,"onUpdate:modelValue":t[3]||(t[3]=r=>e.ruleForm.Data=r),placeholder:"请输入参数",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(a,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:o(()=>[l(m,{label:"开始时间"},{default:o(()=>[l(p,{modelValue:e.ruleForm.StartAt,"onUpdate:modelValue":t[4]||(t[4]=r=>e.ruleForm.StartAt=r),type:"datetime",placeholder:"请选择开始时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),l(a,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:o(()=>[l(m,{label:"下次执行时间"},{default:o(()=>[l(p,{modelValue:e.ruleForm.NextAt,"onUpdate:modelValue":t[5]||(t[5]=r=>e.ruleForm.NextAt=r),type:"datetime",placeholder:"请选择下次执行时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),l(a,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(m,{label:"设置Cron"},{default:o(()=>[l(s,{modelValue:e.ruleForm.Cron,"onUpdate:modelValue":t[6]||(t[6]=r=>e.ruleForm.Cron=r),placeholder:"请输入Cron时间格式",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(a,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(m,{label:"是否启用"},{default:o(()=>[l(D,{modelValue:e.ruleForm.IsEnable,"onUpdate:modelValue":t[7]||(t[7]=r=>e.ruleForm.IsEnable=r),"inline-prompt":"","active-text":"启用","inactive-text":"禁用"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])])}}});export{Ve as default};
